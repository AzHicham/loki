FROM debian:10-slim


# copy package from context inside the docker
COPY navitia-ed_*.deb ./
COPY navitia/source/ ./navitia/source/
COPY bina.sh .

# install navitia-ed package
RUN apt-get update
RUN apt-get install -y ./navitia-ed_*.deb


# install eitri requirements
RUN apt-get install -y python3 python3-pip libpq-dev jq
RUN pip3 install --no-cache-dir -r ./navitia/source/eitri/requirements.txt

VOLUME /data

CMD ["python3", "./navitia/source/eitri/eitri.py", "-d", "/data", "-e", "/usr/bin", "-o", "/data/data.nav.lz4"]




